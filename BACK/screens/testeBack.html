<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>testes</title>
  </head>
  <body>
    <h1>Testes do Back-end</h1>

    <script>
      (async () => {
        /* try {
          if (!window.api || !window.api.login) {
            console.error("API do Electron não disponível");
            return;
          }

          const usuario = await window.api.login.login(
            "admin@sischef.com",
            "admin123",
          );

          console.log("Resultado do login:", usuario);
        } catch (error) {
          console.error("Erro no login:", error);
        }

        try {
          const teste = await window.api.pedido.registrarPedido(1, 1);
          console.log("Teste pedido:", teste);
        } catch (error) {
          console.error("Erro no teste do pedido:", error);
        }

        // teste cadastro garçom
        try {
          const cadastroUsuario =
            await window.api.funcionario.cadastrarFuncionario(
              "Pedro",
              "123456",
              "pedro@teste.com",
              "987654321",
              "Garçom",
            );
          console.log("Cadastro de usuário:", cadastroUsuario);
        } catch (error) {
          console.error("Erro ao cadastrar usuário:", error);
        }
         
          // listar pedidos
          try {
              const listarPedidos = await window.api.pedido.listarPedidos(1);
              console.log("Pedidos listados:", listarPedidos);  

          }
          catch (error) {
              console.error("Erro ao listar pedidos:", error);
          }


        try {
          //remover um item =  objeto com idpedido, idProduto e quantidade
          pedidoItem = {
            idPedido: 1,
            idProduto: 2,
            quantidade: 1
          };
          const removerItemPedido = await window.api.pedido.adicionarProdutosPedido(pedidoItem);

          console.log("Item adicionado ao pedido:", removerItemPedido);  
          //remover um item =  objeto com idpedido, idProduto e quantidade
          pedidoItem = {
            idPedido: 1,
            idProduto: 2,
            quantidade: 1
          };
          const removerItemPedido = await window.api.pedido.adicionarProdutosPedido(pedidoItem);

          console.log("Item adicionado ao pedido:", removerItemPedido);  
        }
        catch (error) {
            console.error("Erro ao adicionar item ao pedido:", error);
        }


       

          // cadastro de categoria
           try {
          const cadastrarCategoria = await window.api.categoria.cadastrarCategoria("Teste Categoria 3", "ativa");
          console.log("Cadastro de categoria:", cadastrarCategoria);
        } catch (error) {
          console.error("Erro ao cadastrar categoria:", error);
      }]
    
         

            // produto por categoria
        try {
          const produtosPorCategoria = await window.api.pedido.getProdutosCategoria(1);
          console.log("Produtos por categoria:", produtosPorCategoria);
        } catch (error) {
          console.error("Erro ao buscar produtos por categoria:", error);
        }
        
         // teste listar categorias
        try {
          const listarCategorias = await window.api.categoria.listarCategorias();
          console.log("Lista de categorias:", listarCategorias);
        } catch (error) {
          console.error("Erro ao listar categorias:", error);
        }
               
             // teste cadastro produto
             let produto = {
              nome: "Produto Teste 5",
              preco: 20.00,
              idCategoria: 1,
              descricao: "Descrição do produto teste"
             };
        try {
          const cadastroProduto = await window.api.produto.cadastrarProduto(produto);
          console.log("Cadastro de produto:", cadastroProduto);
        } catch (error) {
          console.error("Erro ao cadastrar produto:", error);
            console.error("Erro ao adicionar item ao pedido:", error);
        }


       

          // cadastro de categoria
           try {
          const cadastrarCategoria = await window.api.categoria.cadastrarCategoria("Teste Categoria 3", "ativa");
          console.log("Cadastro de categoria:", cadastrarCategoria);
        } catch (error) {
          console.error("Erro ao cadastrar categoria:", error);
      }]
    
         

            // produto por categoria
        try {
          const produtosPorCategoria = await window.api.pedido.getProdutosCategoria(1);
          console.log("Produtos por categoria:", produtosPorCategoria);
        } catch (error) {
          console.error("Erro ao buscar produtos por categoria:", error);
        }
        
         // teste listar categorias
        try {
          const listarCategorias = await window.api.categoria.listarCategorias();
          console.log("Lista de categorias:", listarCategorias);
        } catch (error) {
          console.error("Erro ao listar categorias:", error);
        }
               
             // teste cadastro produto
             let produto = {
              nome: "Produto Teste 5",
              preco: 20.00,
              idCategoria: 1,
              descricao: "Descrição do produto teste"
             };
        try {
          const cadastroProduto = await window.api.produto.cadastrarProduto(produto);
          console.log("Cadastro de produto:", cadastroProduto);
        } catch (error) {
          console.error("Erro ao cadastrar produto:", error);
        }

          // cadastro de mesas
        let mesa = {
          numero: 17,
          status: "livre",
          n_cadeiras: 4,
        };
        try {
          const cadastrarMesas = await window.api.mesas.cadastrarMesas(mesa);
          console.log("Mesas cadastradas:", cadastrarMesas);
        } catch (error) {
          console.error("Erro ao cadastrar mesas:", error);
        }

        try {
          const listarMesas = await window.api.mesas.ListarMesas();
          console.log("Mesas listadas:", listarMesas);
        } catch (error) {
          console.error("Erro ao listar mesas:", error);
        }

         let formulario = {
          email: "john2@adm.com",
          senha: "123456789",
        };
        try {
          const usuario = await window.api.login.login(
            formulario.email,
            formulario.senha,
          );
          if (!usuario) {
            console.error(
              "Login falhou: usuário não encontrado ou senha incorreta",
            );
            return;
          } else {
            console.log("Login bem-sucedido:", usuario);
          }
        } catch (error) {
          console.error("Erro no login:", error);
        }
        
        
  }

        // teste cadastro funcionario
        try {
          const cadastroUsuario = await window.api.funcionario.cadastrarFuncionario(
            "john Adm", // nome
            "77777777777", // cpf
            "john3@adm.com", // email
            "administrador", // cargo
            "123456789", //senha
          );
          console.log("Cadastro de usuário:", cadastroUsuario);
        } catch (error) {
          console.error("Erro ao cadastrar usuário:", error);
        }
        const usuario = await window.api.funcionario.getFuncionario("administrador"); 
        console.log("Resultado do getFuncionario:", usuario);
     */
        const setUsuario = window.api.user.setCurrentUser({
          id: 1,
          nome: "John Doe",
          email: "john@adm.com",
        });
        const currentUser = await window.api.user.getCurrentUser();
        const gerentes = await window.api.funcionario.getFuncionario("Gerente");
        const garcons = await window.api.funcionario.getFuncionario("Garçom");

        console.log("Usuário definido:", setUsuario);
        console.log("Usuário atual:", currentUser);
        console.log(window.api);
        console.log(window.api.funcionario);
        console.log(window.api.funcionario?.getFuncionario);
      })();
    </script>
  </body>
</html>
